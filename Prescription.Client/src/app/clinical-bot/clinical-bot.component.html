<div class="clinical-bot-app">
  <!-- Top Navigation Bar -->
  <header class="top-nav-bar">
    <div class="nav-left">
      <i class="fa-solid fa-robot ai-icon"></i>
      <span class="app-title">AI Clinical Note Processor</span>
    </div>
    <div class="nav-right">
      <span class="nav-subtitle">Transform clinical notes into structured prescription data</span>
    </div>
  </header>

  <!-- Main Content Area -->
  <div class="main-content">
    <!-- Input Panel -->
    <div class="panel panel-input">
      <div class="panel-header">
        <span class="panel-title"><i class="fa-solid fa-file-medical"></i> Clinical Note Input (Multi-Language)</span>
        <div class="panel-actions">
          <button type="button" class="btn-lang" (click)="loadSampleNote()" [disabled]="isStreaming || isProcessing">
            <span class="lang-flag">ðŸ‡¬ðŸ‡§</span> EN
          </button>
          <button type="button" class="btn-lang" (click)="loadBengaliSample()" [disabled]="isStreaming || isProcessing">
            <span class="lang-flag">ðŸ‡§ðŸ‡©</span> à¦¬à¦¾à¦‚
          </button>
          <button type="button" class="btn-lang" (click)="loadHindiSample()" [disabled]="isStreaming || isProcessing">
            <span class="lang-flag">ðŸ‡®ðŸ‡³</span> à¤¹à¤¿
          </button>
          <button type="button" class="btn-icon" (click)="clearNote()" [disabled]="isStreaming || isProcessing"
            title="Clear">
            <i class="fa-solid fa-eraser"></i>
          </button>
        </div>
      </div>
      <div class="panel-content">
        <textarea class="clinical-note-input" [(ngModel)]="clinicalNote" rows="14" placeholder="Paste your clinical note here...

Example format:
Patient: John Doe, 45-year-old male
Chief Complaint: Persistent cough and fever for 3 days

History: Patient reports dry cough, fever up to 101Â°F
Physical Exam: BP 120/80, Pulse 88/min, Temp 100.4Â°F
Diagnosis: Upper Respiratory Tract Infection
Plan: Rest, fluids, Paracetamol 500mg TDS x 5 days" [disabled]="isStreaming || isProcessing">
        </textarea>

        @if (errorMessage) {
        <div class="error-banner">
          <i class="fa-solid fa-exclamation-circle"></i>
          <span>{{ errorMessage }}</span>
        </div>
        }

        <div class="action-bar">
          <button type="button" class="btn-action btn-stream" (click)="streamSummary()"
            [disabled]="isStreaming || isProcessing || !clinicalNote.trim()">
            <i class="fa-solid fa-bolt" [class.fa-spin]="isStreaming"></i>
            {{ isStreaming ? 'Streaming...' : 'Stream Process' }}
          </button>
          <button type="button" class="btn-action btn-generate" (click)="getCompleteSummary()"
            [disabled]="isStreaming || isProcessing || !clinicalNote.trim()">
            <i class="fa-solid fa-wand-magic-sparkles" [class.fa-spin]="isProcessing"></i>
            {{ isProcessing ? 'Processing...' : 'Generate Prescription' }}
          </button>
        </div>
      </div>
    </div>

    <!-- Response Panel -->
    @if (aiResponse) {
    <div class="panel panel-response">
      <div class="panel-header panel-header-success">
        <span class="panel-title"><i class="fa-solid fa-sparkles"></i> AI Analysis Result</span>
        <span class="status-badge">
          <i class="fa-solid fa-check-circle"></i> Complete
        </span>
      </div>
      <div class="panel-content">
        <div class="response-box">
          <pre class="response-text">{{ aiResponse }}</pre>
        </div>
        <div class="redirect-notice">
          <i class="fa-solid fa-arrow-right"></i>
          <span>Analysis complete! Redirecting to prescription form...</span>
        </div>
      </div>
    </div>
    }
  </div>
</div>