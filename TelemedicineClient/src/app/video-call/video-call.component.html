<div class="desktop-app">
    <!-- Title Bar -->
    <div class="title-bar">
        <div class="title-bar-left">
            <div class="app-icon">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
                    <path
                        d="M17 10.5V7c0-.55-.45-1-1-1H4c-.55 0-1 .45-1 1v10c0 .55.45 1 1 1h12c.55 0 1-.45 1-1v-3.5l4 4v-11l-4 4z" />
                </svg>
            </div>
            <span class="app-title">HealthBuddy Telemedicine</span>
        </div>
        <div class="title-bar-right">
            <div class="window-controls">
                <button class="window-btn minimize">
                    <svg viewBox="0 0 12 12">
                        <rect y="5" width="12" height="2" fill="currentColor" />
                    </svg>
                </button>
                <button class="window-btn maximize">
                    <svg viewBox="0 0 12 12">
                        <rect x="1" y="1" width="10" height="10" stroke="currentColor" stroke-width="2" fill="none" />
                    </svg>
                </button>
                <button class="window-btn close">
                    <svg viewBox="0 0 12 12">
                        <path d="M1 1L11 11M11 1L1 11" stroke="currentColor" stroke-width="2" />
                    </svg>
                </button>
            </div>
        </div>
    </div>

    <!-- Main Content -->
    <div class="main-content">
        <!-- Join Screen -->
        <div *ngIf="!isInCall" class="join-screen">
            <div class="join-panel">
                <div class="panel-header">
                    <div class="header-icon">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
                            <path
                                d="M17 10.5V7c0-.55-.45-1-1-1H4c-.55 0-1 .45-1 1v10c0 .55.45 1 1 1h12c.55 0 1-.45 1-1v-3.5l4 4v-11l-4 4z" />
                        </svg>
                    </div>
                    <h1>Start Video Call</h1>
                    <p>Connect with healthcare professionals securely</p>
                </div>

                <div class="panel-body">
                    <div class="form-group">
                        <label for="channelName">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M20 2H4c-1.1 0-2 .9-2 2v18l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2z" />
                            </svg>
                            Channel Name
                        </label>
                        <div class="input-wrapper">
                            <input type="text" id="channelName" [(ngModel)]="channelName"
                                placeholder="Enter channel name" (keyup.enter)="joinCall()" [disabled]="isJoining" />
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="userId">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
                                <path
                                    d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z" />
                            </svg>
                            User ID
                        </label>
                        <div class="input-wrapper">
                            <input type="text" id="userId" [(ngModel)]="userId" placeholder="Your user ID"
                                [disabled]="isJoining" readonly />
                        </div>
                    </div>

                    <button class="btn-primary" (click)="joinCall()" [disabled]="isJoining || !channelName.trim()">
                        <svg *ngIf="!isJoining" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"
                            fill="currentColor">
                            <path
                                d="M20 15.5c-1.25 0-2.45-.2-3.57-.57-.35-.11-.74-.03-1.02.24l-2.2 2.2c-2.83-1.44-5.15-3.75-6.59-6.59l2.2-2.21c.28-.26.36-.65.25-1C8.7 6.45 8.5 5.25 8.5 4c0-.55-.45-1-1-1H4c-.55 0-1 .45-1 1 0 9.39 7.61 17 17 17 .55 0 1-.45 1-1v-3.5c0-.55-.45-1-1-1z" />
                        </svg>
                        <span *ngIf="!isJoining">Join Call</span>
                        <span *ngIf="isJoining" class="loading">
                            <span class="spinner"></span>
                            Connecting...
                        </span>
                    </button>

                    <div *ngIf="errorMessage" class="error-alert">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
                            <path
                                d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z" />
                        </svg>
                        {{ errorMessage }}
                    </div>
                </div>

                <div class="panel-footer">
                    <div class="feature-item">
                        <div class="feature-icon">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M12 1L3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5l-9-4z" />
                            </svg>
                        </div>
                        <span>Encrypted</span>
                    </div>
                    <div class="feature-item">
                        <div class="feature-icon">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
                                <path
                                    d="M19 3h-4.18C14.4 1.84 13.3 1 12 1s-2.4.84-2.82 2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-7 0c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1z" />
                            </svg>
                        </div>
                        <span>HIPAA</span>
                    </div>
                    <div class="feature-item">
                        <div class="feature-icon">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
                                <path
                                    d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z" />
                            </svg>
                        </div>
                        <span>HD Quality</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Call Screen -->
        <div *ngIf="isInCall" class="call-screen">
            <!-- Sidebar -->
            <div class="sidebar">
                <div class="sidebar-header">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
                        <path
                            d="M16 11c1.66 0 2.99-1.34 2.99-3S17.66 5 16 5c-1.66 0-3 1.34-3 3s1.34 3 3 3zm-8 0c1.66 0 2.99-1.34 2.99-3S9.66 5 8 5C6.34 5 5 6.34 5 8s1.34 3 3 3zm0 2c-2.33 0-7 1.17-7 3.5V19h14v-2.5c0-2.33-4.67-3.5-7-3.5zm8 0c-.29 0-.62.02-.97.05 1.16.84 1.97 1.97 1.97 3.45V19h6v-2.5c0-2.33-4.67-3.5-7-3.5z" />
                    </svg>
                    <span>Participants ({{ agoraService.remoteUsers.size + 1 }})</span>
                </div>
                <div class="sidebar-content">
                    <div class="participant-item you">
                        <div class="participant-avatar">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
                                <path
                                    d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z" />
                            </svg>
                        </div>
                        <div class="participant-info">
                            <span class="participant-name">You</span>
                            <span class="participant-status">Connected</span>
                        </div>
                    </div>
                </div>
                <div class="sidebar-footer">
                    <div class="channel-badge">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M20 2H4c-1.1 0-2 .9-2 2v18l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2z" />
                        </svg>
                        {{ channelName }}
                    </div>
                </div>
            </div>

            <!-- Video Area -->
            <div class="video-area">
                <div class="video-main">
                    <div class="remote-streams">
                        <app-remote-stream></app-remote-stream>
                    </div>
                    <div class="local-stream-pip">
                        <app-local-stream></app-local-stream>
                    </div>
                </div>

                <div class="controls-bar">
                    <app-media-controls (onLeaveCall)="leaveCall()"></app-media-controls>
                </div>
            </div>
        </div>
    </div>

    <!-- Status Bar -->
    <div class="status-bar">
        <div class="status-left">
            <span class="status-item">
                <span class="status-dot" [class.connected]="isInCall"></span>
                {{ isInCall ? 'Connected' : 'Ready' }}
            </span>
        </div>
        <div class="status-right">
            <span class="status-item">v1.0.0</span>
        </div>
    </div>
</div>