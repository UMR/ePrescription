<div class="video-call-container">
    <div *ngIf="!isInCall" class="join-screen">
        <div class="join-card">
            <div class="logo">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
                    <path
                        d="M17 10.5V7c0-.55-.45-1-1-1H4c-.55 0-1 .45-1 1v10c0 .55.45 1 1 1h12c.55 0 1-.45 1-1v-3.5l4 4v-11l-4 4z" />
                </svg>
            </div>
            <h1>HealthBuddy Telemedicine</h1>
            <p class="subtitle">Connect with healthcare professionals securely</p>

            <div class="input-group">
                <label for="channelName">Channel Name</label>
                <input type="text" id="channelName" [(ngModel)]="channelName" placeholder="Enter channel name"
                    (keyup.enter)="joinCall()" [disabled]="isJoining" />
            </div>

            <div class="input-group">
                <label for="userId">User ID</label>
                <input type="text" id="userId" [(ngModel)]="userId" placeholder="Your user ID" [disabled]="isJoining"
                    readonly />
            </div>

            <button class="join-button" (click)="joinCall()" [disabled]="isJoining || !channelName.trim()">
                <span *ngIf="!isJoining">Join Call</span>
                <span *ngIf="isJoining">
                    <span class="spinner"></span>
                    Joining...
                </span>
            </button>

            <div *ngIf="errorMessage" class="error-message">
                {{ errorMessage }}
            </div>

            <div class="features">
                <div class="feature">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M12 1L3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5l-9-4z" />
                    </svg>
                    <span>Encrypted</span>
                </div>
                <div class="feature">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
                        <path
                            d="M19 3h-4.18C14.4 1.84 13.3 1 12 1s-2.4.84-2.82 2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-7 0c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1z" />
                    </svg>
                    <span>HIPAA Compliant</span>
                </div>
                <div class="feature">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
                        <path
                            d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z" />
                    </svg>
                    <span>HD Quality</span>
                </div>
            </div>
        </div>
    </div>
    <div *ngIf="isInCall" class="call-screen">
        <div class="video-grid">
            <div class="remote-streams">
                <app-remote-stream></app-remote-stream>
            </div>
            <div class="local-stream-pip">
                <app-local-stream></app-local-stream>
            </div>
        </div>

        <div class="controls-container">
            <app-media-controls (onLeaveCall)="leaveCall()"></app-media-controls>
        </div>

        <div class="channel-info">
            <span class="channel-name">{{ channelName }}</span>
            <span class="user-count">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
                    <path
                        d="M16 11c1.66 0 2.99-1.34 2.99-3S17.66 5 16 5c-1.66 0-3 1.34-3 3s1.34 3 3 3zm-8 0c1.66 0 2.99-1.34 2.99-3S9.66 5 8 5C6.34 5 5 6.34 5 8s1.34 3 3 3zm0 2c-2.33 0-7 1.17-7 3.5V19h14v-2.5c0-2.33-4.67-3.5-7-3.5zm8 0c-.29 0-.62.02-.97.05 1.16.84 1.97 1.97 1.97 3.45V19h6v-2.5c0-2.33-4.67-3.5-7-3.5z" />
                </svg>
                {{ agoraService.remoteUsers.size + 1 }}
            </span>
        </div>
    </div>
</div>